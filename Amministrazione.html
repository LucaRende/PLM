<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>PLM 2 - Amministrazione</title>
    
    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- CSS Modules -->
    <link rel="stylesheet" href="PLM Web/StileBase/StileBase.css">
    <link rel="stylesheet" href="PLM Web/Funzioni/Loader.css">
    <link rel="stylesheet" href="PLM Web/Login/Login.css">
    <link rel="stylesheet" href="PLM Web/Amministrazione/Amministrazione.css">
</head>
<body>
    <!-- Login Screen Overlay -->
    <div class="login-overlay" id="loginOverlay">
        <!-- Animated Background -->
        <div class="login-bg">
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
        </div>

        <!-- Loading Animation -->
        <div class="loading-container" id="loadingContainer">
            <div class="loading-logo">
                <img src="logo-tondo.png" alt="Logo" style="width: 100%; height: 100%; object-fit: contain;">
            </div>
            <div class="loading-spinner"></div>
            <div class="loading-text">Inizializzazione sistema...</div>
        </div>

        <!-- Login Form -->
        <div class="login-form-container" id="loginFormContainer">
            <div class="login-card">
                <div class="login-header">
                    <div class="login-icon">
                        <img src="logo-tondo.png" alt="Logo">
                    </div>
                    <h1 class="login-title">PLM 2</h1>
                    <p class="login-subtitle">Accedi al sistema</p>
                </div>
                
                <form id="loginForm" onsubmit="return handleLogin(event)">
                    <div class="login-input-group">
                        <input 
                            type="password" 
                            id="passwordInput" 
                            class="login-input" 
                            placeholder="Inserisci la password"
                            autocomplete="off"
                            required
                        >
                    </div>
                    
                    <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 20px;">
                        <input 
                            type="checkbox" 
                            id="rememberPassword" 
                            style="width: 18px; height: 18px; cursor: pointer; accent-color: #c51d34;"
                        >
                        <label 
                            for="rememberPassword" 
                            style="color: rgba(255, 255, 255, 0.7); font-size: 0.9em; cursor: pointer; user-select: none;"
                        >
                            Ricorda password
                        </label>
                    </div>
                    
                    <button type="submit" class="login-button">
                        Accedi
                    </button>
                    <div class="login-error" id="loginError">
                        ‚ùå Password non corretta
                    </div>
                </form>

                <div class="success-check" id="successCheck"></div>
            </div>
        </div>
    </div>

    <div class="main-container">
        <!-- Animated Background Particles -->
        <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; overflow: hidden;">
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
        </div>
        
        <div class="title-section" style="position: relative; z-index: 1;">
            <div class="logo-container">
                <img src="logo-tondo.png" alt="Logo CRM" class="logo">
            </div>
            <div class="signature-text">Pro System<sup style="font-size: 0.5em; margin-left: 3px; color: white;">¬Æ</sup></div>
        </div>

        <div class="dashboards-grid">
            <!-- Dashboard Panoramica Castelletti -->
            <div class="dashboard">
            <div class="dashboard-header" id="castellettiHeader">
                <div class="dashboard-top">
                    <div class="dashboard-title">
                        <span class="dashboard-icon">
                            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect x="3" y="4" width="18" height="16" rx="2" stroke="white" stroke-width="2" fill="none"/>
                                <line x1="3" y1="10" x2="21" y2="10" stroke="white" stroke-width="2"/>
                                <line x1="9" y1="10" x2="9" y2="20" stroke="white" stroke-width="2"/>
                                <line x1="15" y1="10" x2="15" y2="20" stroke="white" stroke-width="2"/>
                            </svg>
                        </span>
                        <h2>Panoramica Castelletti</h2>
                    </div>
                    <span class="toggle-arrow">‚ñº</span>
                </div>
            </div>
            <div class="dashboard-content" id="castellettiContent">
                <div class="dashboard-body" style="padding: 24px 20px;">
                    <div id="castellettiList">
                        <div class="loading-state">Caricamento castelletti...</div>
                    </div>
                </div>
            </div>
            </div>
        </div>
    </div>

    <!-- Modern Footer -->
    <footer class="modern-footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3 class="footer-title">Dashboard</h3>
                <div class="footer-links">
                    <a href="#" class="footer-link" onclick="scrollToDashboard('dashHeader'); return false;">Attivit√† CRM</a>
                    <a href="#" class="footer-link" onclick="scrollToDashboard('ganttHeader'); return false;">Ufficio Tecnico</a>
                </div>
            </div>

            <div class="footer-section">
                <h3 class="footer-title">Risorse</h3>
                <div class="footer-links">
                    <a href="#" class="footer-link">Documentazione</a>
                    <a href="#" class="footer-link">Guide & Tutorial</a>
                    <a href="/cdn-cgi/l/email-protection#48243d2b29663a2d262c2d08383a273b313b3c2d253b3a24662d3d773b3d2a222d2b3c751a212b20212d3b3c296d7a782c216d7a7829213d3c276e2a272c31751e27242d3e276d7a782b20212d2c2d3a2d6d7a783d266d7a7821262e273a2529322127262d6d7a783b3d2424296d7a78263d273e296d7a782c293b202a27293a2c6d7a7827262421262d6d7a782c2d246d7a781804056d7a787a66" class="footer-link">Supporto</a>
                </div>
            </div>

            <div class="footer-section">
                <h3 class="footer-title">Statistiche Live</h3>
                <div class="footer-stats">
                    <div class="footer-stat">
                        <div class="footer-stat-value" id="footerActivities">--</div>
                        <div class="footer-stat-label">Attivit√† Attive</div>
                    </div>
                    <div class="footer-stat">
                        <div class="footer-stat-value" id="footerTasks">--</div>
                        <div class="footer-stat-label">Lavori Oggi</div>
                    </div>
                </div>
            </div>

            <div class="footer-section">
                <h3 class="footer-title">Sistema</h3>
                <div class="footer-badge">Pro System</div>
                <p style="font-size: 0.8em; color: rgba(255, 255, 255, 0.5); margin-top: 8px;">
                    Versione 2.0.0<br>
                    Ultimo aggiornamento: Dicembre 2025
                </p>
            </div>
        </div>

        <div class="footer-bottom">
            <div class="footer-credits">
                <div style="margin-bottom: 10px;">¬© 2025 PLM 2 - Tutti i diritti riservati</div>
                <div style="font-size: 0.9em; color: rgba(255, 255, 255, 0.5);">
                    Power by: <span style="font-family: 'Inter', -apple-system, sans-serif; font-size: 1.5em; color: white;">Rende Luca</span>
                </div>
            </div>
            <div class="footer-social">
                <a href="#" class="social-link" title="Documentation">üìö</a>
                <a href="#" class="social-link" title="Support">üí¨</a>
                <a href="#" class="social-link" title="Settings">‚öôÔ∏è</a>
            </div>
        </div>
    </footer>

    <!-- Floating Menu -->
    <div class="floating-menu">
        <button class="menu-toggle" id="menuToggle" onclick="toggleMenu()">
            <svg viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="1"></circle>
                <circle cx="12" cy="5" r="1"></circle>
                <circle cx="12" cy="19" r="1"></circle>
            </svg>
        </button>
        <div class="menu-panel" id="menuPanel">
            <a href="index.html" class="menu-item">
                <div class="menu-item-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7" rx="1"></rect>
                        <rect x="14" y="3" width="7" height="7" rx="1"></rect>
                        <rect x="14" y="14" width="7" height="7" rx="1"></rect>
                        <rect x="3" y="14" width="7" height="7" rx="1"></rect>
                    </svg>
                </div>
                <span class="menu-item-text">Dashboard</span>
            </a>
            <a href="Amministrazione.html" class="menu-item current" id="adminMenuItem">
                <div class="menu-item-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                    </svg>
                </div>
                <span class="menu-item-text">Amministrazione</span>
            </a>
            <div class="menu-separator"></div>
            <a href="#" class="menu-item" onclick="logout(); return false;">
                <div class="menu-item-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                        <polyline points="16 17 21 12 16 7"></polyline>
                        <line x1="21" y1="12" x2="9" y2="12"></line>
                    </svg>
                </div>
                <span class="menu-item-text">Esci</span>
            </a>
        </div>
    </div>

    <!-- JavaScript Modules -->
    <script src="PLM Web/Funzioni/Loader.js"></script>
    <script src="PLM Web/StileBase/StileBase.js"></script>
    <script src="PLM Web/Login/Login.js"></script>
    <script src="PLM Web/Amministrazione/Amministrazione.js"></script>
</body>
</html>
